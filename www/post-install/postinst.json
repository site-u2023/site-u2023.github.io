{
  "requiresUpdate": true,
  "_schema": {
    "_description": "Package definition schema for postinst.json. This block is ignored by custom.js.",
    "category_options": {
      "id": "Category identifier (required, unique)",
      "name": "Display name in UI",
      "class": "Translation key (tr-xxx format)",
      "description": "Category description shown as tooltip",
      "hidden": "If true, category is not displayed but packages are processed",
      "reboot": "If true, all packages in this category require reboot",
      "type": "Special category type (e.g. 'special' for dynamic content)",
      "handler": "Handler function name for special categories"
    },
    "package_options": {
      "id": "Package name to install via opkg/apk (required)",
      "name": "Display name in UI (defaults to id if omitted)",
      "uniqueId": "Unique identifier for distinguishing multiple entries with same id (coexistence flag)",
      "description": "Package description shown as tooltip",
      "dependencies": "Array of package ids to select together",
      "enableVar": "Variable name to set in setup.sh when selected",
      "installOptions": "Key name from top-level installOptions mapping (e.g. ignoreDeps, forceOverwrite)",
      "hidden": "If true, package is not displayed (for dependency-only packages)",
      "virtual": "If true, skip package availability check (for non-existent packages)",
      "reboot": "If true, package requires reboot after install",
      "checked": "If true, package is selected by default"
    },
    "example": {
      "id": "apache",
      "name": "htpasswd",
      "uniqueId": "htpasswd-from-apache",
      "description": "Password hash tool (extracted from apache)",
      "dependencies": ["libaprutil", "libapr"],
      "enableVar": "htpasswd",
      "installOptions": "ignoreDeps",
      "hidden": "false",
      "virtual": "false",
      "reboot": "false",
      "checked": "false"
    }
  },
  "categories": [
    {
      "id": "language-pack",
      "name": "Language Package",
      "class": "tr-tui-language-package",
      "description": "LuCI interface language packages",
      "type": "special",
      "handler": "language_selector",
      "packages": []
    },
    {
      "id": "basic-system",
      "name": "Basic System Features",
      "class": "tr-basic-system-features",
      "description": "Terminal access and file transfer tools",
      "packages": [
        {
          "id": "luci-app-ttyd",
          "name": "luci-app-ttyd",
          "enableVar": "ttyd",
          "checked": "true"
        },
        {
          "id": "openssh-sftp-server",
          "name": "openssh-sftp-server",
          "checked": "true"
        },
        {
          "id": "luci-app-commands",
          "name": "luci-app-commands"
        },
        {
          "id": "luci-app-filebrowser",
          "name": "luci-app-filebrowser"
        }
      ]
    },
    {
      "id": "system-management",
      "name": "System Management",
      "class": "tr-system-management",
      "description": "System upgrades, CPU interrupt balancing, and log management",
      "packages": [
        {
          "id": "luci-app-attendedsysupgrade",
          "name": "luci-app-attendedsysupgrade",
          "checked": "false",
          "dependencies": []
        },
        {
          "id": "owut",
          "name": "owut",
          "checked": "true"
        },
        {
          "id": "auc",
          "name": "auc",
          "checked": "false"
        },
        {
          "id": "luci-app-irqbalance",
          "name": "luci-app-irqbalance",
          "enableVar": "irqbalance"
        },
        {
          "id": "logrotate",
          "name": "logrotate"
        }
      ]
    },
    {
      "id": "system-monitoring",
      "name": "System Monitoring",
      "class": "tr-system-monitoring",
      "description": "System watchdog, network monitoring, and resource monitoring tools",
      "packages": [
        {
          "id": "luci-app-watchcat",
          "name": "luci-app-watchcat"
        },
        {
          "id": "netdata",
          "name": "netdata"
        },
        {
          "id": "htop",
          "name": "htop",
          "dependencies": ["collectd-htop", "collectd-mod-thermal"]
        },
        {
          "id": "collectd",
          "name": "collectd",
          "uniqueId": "collectd-htop",
          "hidden": "true"
        },
        {
          "id": "collectd-mod-thermal",
          "name": "collectd-mod-thermal",
          "hidden": "true"
        },
        {
          "id": "btop",
          "name": "btop"
        },
        {
          "id": "prometheus-node-exporter-lua",
          "name": "prometheus-node-exporter-lua",
          "dependencies": [
            "prometheus-node-exporter-lua-openwrt",
            "prometheus-node-exporter-lua-nat_traffic",
            "prometheus-node-exporter-lua-thermal"
          ]
        },
        {
          "id": "prometheus-node-exporter-lua-openwrt",
          "name": "prometheus-node-exporter-lua-openwrt",
          "hidden": "true"
        },
        {
          "id": "prometheus-node-exporter-lua-nat_traffic",
          "name": "prometheus-node-exporter-lua-nat_traffic",
          "hidden": "true"
        },
        {
          "id": "prometheus-node-exporter-lua-thermal",
          "name": "prometheus-node-exporter-lua-thermal",
          "hidden": "true"
        }
      ]
    },
    {
      "id": "network-management",
      "name": "Network Management",
      "class": "tr-network-management",
      "description": "QoS, bandwidth monitoring, Wi-Fi scheduling, policy-based routing, and network utilities",
      "packages": [
        {
          "id": "luci-app-sqm",
          "name": "luci-app-sqm",
          "dependencies": ["tc-full"]
        },
        {
          "id": "tc-full",
          "name": "tc-full",
          "hidden": "true"
        },
        {
          "id": "luci-app-statistics",
          "name": "luci-app-statistics",
          "dependencies": ["collectd-app-statistics", "rrdtool1"]
        },
        {
          "id": "collectd",
          "name": "collectd",
          "uniqueId": "collectd-app-statistics",
          "hidden": "true"
        },
        {
          "id": "rrdtool1",
          "name": "rrdtool1",
          "hidden": "true"
        },
        {
          "id": "luci-app-nlbwmon",
          "name": "luci-app-nlbwmon"
        },
        {
          "id": "luci-app-vnstat2",
          "name": "luci-app-vnstat2"
        },
        {
          "id": "luci-app-wol",
          "name": "luci-app-wol"
        },
        {
          "id": "luci-app-ddns",
          "name": "luci-app-ddns",
          "dependencies": ["wget-ssl", "bind-host"]
        },
        {
          "id": "wget-ssl",
          "name": "wget-ssl",
          "hidden": "true"        
        },
        {
          "id": "bind-host",
          "name": "bind-host",
          "hidden": "true"        
        },  
        {
          "id": "luci-app-tor",
          "name": "luci-app-tor"         
        },
        {
          "id": "luci-app-mwan3",
          "name": "luci-app-mwan3 (iptables)",
          "dependencies": ["mwan3"]
        },
        {
          "id": "mwan3",
          "name": "mwan3",
          "hidden": "true"
        },
        {
          "id": "luci-app-pbr",
          "name": "luci-app-pbr"
        }
      ]
    },
    {
      "id": "wifi-management",
      "name": "Wi-Fi Management",
      "class": "tr-wifi-management",
      "description": "Wi-Fi scheduling, roaming optimization, and wireless utilities",
      "packages": [
        {
          "id": "luci-app-wifischedule",
          "name": "luci-app-wifischedule"
        },
        {
          "id": "luci-app-travelmate",
          "name": "luci-app-travelmate"
        }
      ]
    },
    {
      "id": "modem-support",
      "name": "Modem Support",
      "class": "tr-modem-support",
      "description": "4G/5G modem management (ModemManager includes SMS support)",
      "reboot": true,
      "packages": [
        {
          "id": "luci-proto-modemmanager",
          "name": "luci-proto-modemmanager",
          "dependencies": [
            "kmod-usb-wdm",
            "kmod-usb-net-cdc-mbim",
            "kmod-usb-net-qmi-wwan",
            "uqmi",
            "mbim-utils",
            "screen"
          ]
        },
        {
          "id": "kmod-usb-wdm",
          "name": "kmod-usb-wdm",
          "hidden": "true"
        },
        {
          "id": "kmod-usb-net-cdc-mbim",
          "name": "kmod-usb-net-cdc-mbim",
          "hidden": "true"
        },
        {
          "id": "kmod-usb-net-qmi-wwan",
          "name": "kmod-usb-net-qmi-wwan",
          "hidden": "true"
        },
        {
          "id": "uqmi",
          "name": "uqmi",
          "hidden": "true"
        },
        {
          "id": "mbim-utils",
          "name": "mbim-utils",
          "hidden": "true"
        },
        {
          "id": "screen",
          "name": "screen",
          "hidden": "true"
        }
      ]
    },
    {
      "id": "security-tools",
      "name": "Security Tools",
      "class": "tr-security-tools",
      "description": "Intrusion prevention and IP blocking tools",
      "packages": [
        {
          "id": "fail2ban",
          "name": "fail2ban"
        },
        {
          "id": "luci-app-banip",
          "name": "luci-app-banip"
        },
        {
          "id": "luci-app-acme",
          "name": "luci-app-acme"
        }
      ]
    },
    {
      "id": "diagnostic-tools",
      "name": "Network Diagnostic Tools",
      "class": "tr-diagnostic-tools",
      "description": "Network testing, monitoring, analysis and DNS troubleshooting tools",
      "packages": [
        {
          "id": "mtr-nojson",
          "name": "mtr-nojson"
        },
        {
          "id": "nmap",
          "name": "nmap"
        },
        {
          "id": "tcpdump",
          "name": "tcpdump"
        },
        {
          "id": "iperf3",
          "name": "iperf3"
        },
        {
          "id": "speedtest-netperf",
          "name": "speedtest-netperf"
        },
        {
          "id": "iftop",
          "name": "iftop"
        },
        {
          "id": "bind-dig",
          "name": "bind-dig"
        },
        {
          "id": "ethtool",
          "name": "ethtool"
        }
      ]
    },
    {
      "id": "system-tools",
      "name": "System Administration Tools",
      "class": "tr-system-tools",
      "description": "Terminal enhancements, debugging, file management and HTTP client tools",
      "packages": [
        {
          "id": "tmux",
          "name": "tmux"
        },
        {
          "id": "nano-plus",
          "name": "nano-plus"
        },
        {
          "id": "lsof",
          "name": "lsof"
        },
        {
          "id": "rsync",
          "name": "rsync"
        },
        {
          "id": "curl",
          "name": "curl"
        }
      ]
    },
    {
      "id": "themes-dashboard",
      "name": "Themes and Dashboard",
      "class": "tr-themes-dashboard",
      "description": "UI themes and dashboard improvements",
      "packages": [
        {
          "id": "luci-mod-dashboard",
          "name": "luci-mod-dashboard",
          "checked": "true"
        },
        {
          "id": "luci-theme-openwrt",
          "name": "luci-theme-openwrt",
          "dependencies": ["luci-theme-material", "luci-theme-openwrt-2020"]
        },
        {
          "id": "luci-theme-material",
          "name": "luci-theme-material",
          "hidden": "true"
        },
        {
          "id": "luci-theme-openwrt-2020",
          "name": "luci-theme-openwrt-2020",
          "hidden": "true"
        }
      ]
    },
    {
      "id": "utilities",
      "name": "Utilities",
      "class": "tr-utilities",
      "description": "VPN, media server, and device management utilities",
      "packages": [
        {
          "id": "luci-app-advanced-reboot",
          "name": "luci-app-advanced-reboot",
          "description": "Dual-firmware reboot manager (Linksys/Xiaomi/ZyXEL)"
        },
        {
          "id": "luci-proto-wireguard",
          "name": "luci-proto-wireguard",
          "dependencies": ["luci-app-wireguard", "wireguard-tools"]
        },
        {
          "id": "luci-app-wireguard",
          "name": "luci-app-wireguard",
          "hidden": "true"
        },
        {
          "id": "wireguard-tools",
          "name": "wireguard-tools",
          "hidden": "true"
        },
        {
          "id": "zerotier",
          "name": "zerotier"
        },
        {
          "id": "tailscale",
          "name": "tailscale"
        },
        {
          "id": "luci-app-dockerman",
          "name": "luci-app-dockerman (iptables)",
          "dependencies": ["docker-compose"]
        },
        {
          "id": "docker-compose",
          "name": "docker-compose",
          "dependencies": [],
          "hidden": "true"
        },
        {
          "id": "docker",
          "name": "docker",
          "hidden": "true"
        },
        {
          "id": "luci-app-openvpn",
          "name": "luci-app-openvpn"
        },
        {
          "id": "luci-app-minidlna",
          "name": "luci-app-minidlna"
        },
        {
          "id": "smartmontools",
          "name": "smartmontools"
        },
        {
          "id": "whiptail",
          "name": "whiptail",
          "dependencies": ["libnewt"],
          "checked": "true"
        },
        {
          "id": "libnewt",
          "name": "libnewt",
          "hidden": "true"
        }
      ]
    },
    {
      "id": "usb-storage",
      "name": "USB Storage Support",
      "class": "tr-usb-storage",
      "description": "USB storage kernel module and filesystem tools",
      "packages": [
        {
          "id": "kmod-usb-storage-uas",
          "name": "kmod-usb-storage-uas",
          "dependencies": [
            "block-mount",
            "usbutils",
            "gdisk"
          ],
          "reboot": true
        },
        {
          "id": "block-mount",
          "name": "block-mount",
          "hidden": "true"
        },
        {
          "id": "usbutils",
          "name": "usbutils",
          "hidden": "true"
        },
        {
          "id": "gdisk",
          "name": "gdisk",
          "hidden": "true"
        },
        {
          "id": "dosfstools",
          "name": "dosfstools",
          "dependencies": ["kmod-fs-vfat"]
        },
        {
          "id": "kmod-fs-vfat",
          "name": "kmod-fs-vfat",
          "hidden": "true",
          "reboot": true
        },
        {
          "id": "e2fsprogs",
          "name": "e2fsprogs",
          "dependencies": ["kmod-fs-ext4"]
        },
        {
          "id": "kmod-fs-ext4",
          "name": "kmod-fs-ext4",
          "hidden": "true",
          "reboot": true
        },
        {
          "id": "f2fs-tools",
          "name": "f2fs-tools",
          "dependencies": ["kmod-fs-f2fs"]
        },
        {
          "id": "kmod-fs-f2fs",
          "name": "kmod-fs-f2fs",
          "hidden": "true",
          "reboot": true
        },
        {
          "id": "exfat-fsck",
          "name": "exfat-fsck",
          "dependencies": ["kmod-fs-exfat"]
        },
        {
          "id": "kmod-fs-exfat",
          "name": "kmod-fs-exfat",
          "hidden": "true",
          "reboot": true
        },
        {
          "id": "ntfs-3g",
          "name": "ntfs-3g",
          "dependencies": ["kmod-fs-ntfs3"]
        },
        {
          "id": "kmod-fs-ntfs3",
          "name": "kmod-fs-ntfs3",
          "hidden": "true",
          "reboot": true
        },
        {
          "id": "hfsfsck",
          "name": "hfsfsck",
          "dependencies": ["kmod-fs-hfs", "kmod-fs-hfsplus"]
        },
        {
          "id": "kmod-fs-hfs",
          "name": "kmod-fs-hfs",
          "hidden": "true",
          "reboot": true
        },
        {
          "id": "kmod-fs-hfsplus",
          "name": "kmod-fs-hfsplus",
          "hidden": "true",
          "reboot": true
        },
        {
          "id": "luci-app-hd-idle",
          "name": "luci-app-hd-idle"
        },
        {
          "id": "kmod-usb-ledtrig-usbport",
          "name": "kmod-usb-ledtrig-usbport",
          "reboot": true
        },
        {
          "id": "kmod-usb-net-rndis",
          "name": "kmod-usb-net-rndis",
          "dependencies": ["kmod-usb-net-cdc-ether"],
          "enableVar": "usb_rndis",
          "reboot": true
        },
        {
          "id": "kmod-usb-net-cdc-ether",
          "name": "kmod-usb-net-cdc-ether",
          "hidden": "true",
          "reboot": true
        },
        {
          "id": "kmod-usb-gadget-eth",
          "name": "kmod-usb-gadget-eth (requires reboot)",
          "dependencies": ["kmod-usb-dwc2"],
          "enableVar": "usb_gadget",
          "reboot": true
        },
        {
          "id": "kmod-usb-dwc2",
          "name": "kmod-usb-dwc2",
          "hidden": "true",
          "reboot": true
        },
        {
          "id": "resize2fs",
          "name": "resize2fs",
          "dependencies": ["parted", "f2fs-tools-resize2fs"]
        },
        {
          "id": "parted",
          "name": "parted",
          "hidden": "true"
        },
        {
          "id": "f2fs-tools",
          "name": "f2fs-tools",
          "uniqueId": "f2fs-tools-resize2fs",
          "hidden": "true"
        }
      ]
    },
    {
      "id": "file-sharing",
      "name": "File Sharing",
      "class": "tr-file-sharing",
      "description": "SMB/CIFS file sharing servers",
      "packages": [
        {
          "id": "luci-app-samba4",
          "name": "luci-app-samba4",
          "dependencies": ["wsdd2"],
          "enableVar": "samba4"
        },
        {
          "id": "wsdd2",
          "name": "wsdd2",
          "hidden": "true"
        },
        {
          "id": "luci-app-ksmbd",
          "name": "luci-app-ksmbd",
          "dependencies": ["ksmbd-avahi-service"]
        },
        {
          "id": "ksmbd-avahi-service",
          "name": "ksmbd-avahi-service",
          "hidden": "true"
        },
        {
          "id": "luci-app-transmission",
          "name": "luci-app-transmission"
        },
        {
          "id": "syncthing",
          "name": "syncthing"
        }
      ]
    },
    {
      "id": "web-tools",
      "name": "Web Server Tools",
      "class": "tr-web-tools",
      "description": "Apache web server. Note: apache includes htpasswd.",
      "packages": [
        {
          "id": "apache",
          "name": "apache",
          "description": "Full Apache HTTP Server (includes htpasswd)",
          "enableVar": "apache_keep"
        }
      ]
    },   
    {
      "id": "encrypted-dns",
      "name": "Encrypted DNS",
      "class": "tr-encrypted-dns",
      "description": "DoH/DoT for upstream DNS servers",
      "packages": [
        {
          "id": "luci-app-https-dns-proxy",
          "name": "luci-app-https-dns-proxy (DoH)"
        },
        {
          "id": "stubby",
          "name": "stubby (DoT)"
        }
      ]
    },
    {
      "id": "setup-driven-packages",
      "name": "Setup-driven Packages",
      "class": "tr-setup-driven-packages",
      "description": "Packages automatically managed by setup.json configuration",
      "hidden": "true",
      "packages": [
        {
          "id": "map",
          "name": "map",
          "hidden": "true",
          "description": "MAP-E support package",
          "reboot": true
        },
        {
          "id": "coreutils-sha1sum",
          "name": "coreutils-sha1sum",
          "hidden": "true",
          "description": "SHA1 checksum utility for MAP-E"
        },
        {
          "id": "ds-lite", 
          "name": "ds-lite",
          "hidden": "true",
          "description": "DS-Lite support package",
          "reboot": true
        },
        {
          "id": "luci-app-usteer",
          "name": "luci-app-usteer",
          "hidden": "true",
          "description": "Usteer package managed by Wi-Fi setup"
        },
        {
          "id": "adguardhome",
          "name": "adguardhome",
          "hidden": "true",
          "description": "AdGuard Home DNS server (managed by Custom Scripts)"
        },
        {
          "id": "apache",
          "name": "htpasswd",
          "uniqueId": "htpasswd-from-apache",
          "hidden": "true",
          "description": "Password hash tool for AdGuard Home (extracted from apache)",
          "installOptions": "ignoreDeps",
          "extractOnly": "true",
          "binaryPath": "/usr/bin/htpasswd"
        },
        {
          "id": "luci-app-adblock-fast",
          "name": "luci-app-adblock-fast",
          "hidden": "true",
          "description": "Adblock Fast (managed by Custom Scripts)"
        },
        {
          "id": "luci-app-nextdns",
          "name": "luci-app-nextdns",
          "hidden": "true",
          "description": "NextDNS (managed by Custom Scripts)"
        },
        {
          "id": "kmod-tcp-bbr",
          "name": "kmod-tcp-bbr",
          "hidden": "true",
          "description": "BBR TCP congestion control kernel module",
          "reboot": "true"
        }
      ]
    }
  ]
}
