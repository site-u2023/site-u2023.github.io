<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenWrt Custom Components</title>
</head>
<body>
    <!-- Settings Import/Export Bar (will be injected after header) -->
    <div id="settings-bar-template" style="display: none;">
        <div id="settings-bar">
            <div class="settings-bar-content">
                <div class="left-section">
                    <div id="asu-status-container" class="asu-status">
                    <span id="asu-status-indicator" class="status-indicator status-checking">‚óè</span>
                    <span id="asu-status-text" class="status-text tr-asu-status-checking">Checking...</span>
                    <span id="asu-queue-display" class="queue-display"></span>
                    <a id="asu-server-link" href="https://sysupgrade.openwrt.org/" target="_blank" rel="noopener noreferrer" class="asu-link">üîó</a>
                </div>
                
                <!-- „Ç´„Çπ„Çø„É†„Éì„É´„ÉâË°®Á§∫ -->
                <div id="custom-build-badge" class="custom-build-badge">
                    <span class="badge-text tr-custom-build-label">Custom Build (Unofficial)</span>
                </div>
                </div>
                
                <div class="right-section">
                    <button id="import-settings-btn" class="settings-btn" title="Import Settings">
                        üì• <span class="tr-import-settings">Import</span>
                    </button>
                    <button id="export-settings-btn" class="settings-btn" title="Export Settings">
                        üì§ <span class="tr-export-settings">Export</span>
                    </button>
                </div>
            </div>
        </div>
        <input type="file" id="import-file-input" accept=".txt,.ini" style="display: none;">
    </div>

    <!-- Enhanced Package Selector -->
    <div id="custom-packages-section">
        <details id="packages-details">
            <summary>
                <h3 class="tr-custom-packages">Installed Packages</h3>
            </summary>
            <div id="package-selector-config">
                <div class="package-search-container config-section">
                    <h4><span class="tr-package-search">Package Search</span></h4>
                    <div id="package-search-autocomplete" class="autocomplete">
                        <input type="text"
                            id="package-search"
                            placeholder="Type package name"
                            autocomplete="off"
                            spellcheck="false"
                            autocapitalize="off">
                    </div>
                </div>
                
                <div id="package-categories">
                    <!-- packages.json„Åã„ÇâÂãïÁöÑ„Å´ÁîüÊàê„Åï„Çå„Çã -->
                </div>
                
                <details id="postinst-details" class="config-section">
                    <summary>
                        <h4 class="tr-postinst">Post-Install (Package installation script)</h4>
                    </summary> 
                    <textarea
                        id="asu-packages"
                        autocomplete="off"
                        spellcheck="false"
                        autocapitalize="off"
                    ></textarea>
                </details>
            </div>
        </details>
    </div>

    <!-- Scripts Configuration -->
    <div id="custom-scripts-section">
        <details id="scripts-details">
            <summary>
                <h3 class="tr-custom-defaults">Script to run on first boot (uci-defaults)</h3>
            </summary>
            <div id="scripts-config">
                <div class="commands-container config-section">
                    <h4><span class="tr-add-commands">Add commands</span></h4>
                    <div id="commands-autocomplete" class="autocomplete">
                        <input type="text"
                            id="command"
                            placeholder="Type commands"
                            autocomplete="off"
                            spellcheck="false"
                            autocapitalize="off">
                    </div>
                </div>
                
                <!-- setup.json„Åã„ÇâÂãïÁöÑ„Å´ÁîüÊàê„Åï„Çå„ÇãË®≠ÂÆö„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <div id="dynamic-config-sections">
                    <!-- „Åì„Åì„Å´setup.json„Éô„Éº„Çπ„ÅÆË®≠ÂÆöÈ†ÖÁõÆ„ÅåÂãïÁöÑ„Å´ÁîüÊàê„Åï„Çå„Çã -->
                </div>

                <!-- UCI-defaults „Çª„ÇØ„Ç∑„Éß„É≥ -->
                <details id="uci-defaults-details" class="config-section">
                    <summary>
                        <h4 class="tr-uci">UCI-defaults (Boot configuration script)</h4>
                        <div id="uci-defaults-size-info" class="file-size-info">
                            <span id="uci-defaults-size"></span>
                            <br>
                            <span id="uci-size-limit" class="file-size-note tr-uci-size-limit"></span>
                        </div>
                    </summary>
                    <div id="uci-defaults-group">
                        <textarea
                            id="uci-defaults-content"
                            autocomplete="off"
                            spellcheck="false"
                            autocapitalize="off"
                        ></textarea>
                    </div>
                </details>
            </div>
        </details>
    </div>

    <!-- ASU Build Section -->
    <div id="asu-build-section" style="display:none;">
        <br>
        <div id="asu-buildstatus" class="hide">
            <span></span>
            <div id="asu-log" class="hide">
                <details>
                    <summary>
                        <code>STDERR</code>
                    </summary>
                    <pre id="asu-stderr"></pre>
                </details>
                <details>
                    <summary>
                        <code>STDOUT</code>
                    </summary>
                    <pre id="asu-stdout"></pre>
                </details>
            </div>
        </div>
        <a href="javascript:buildAsuRequest()" class="custom-link">
            <span></span><span class="tr-request-build">REQUEST BUILD</span>
        </a>
    </div>
</body>
</html>
