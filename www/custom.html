<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenWrt Custom Components</title>
</head>
<body>
    <!-- Enhanced Package Selector -->
    <div id="custom-packages-section">
        <details id="packages-details">
            <summary>
                <h3 class="tr-custom-packages">Installed Packages</h3>
            </summary>
            <div id="package-selector-config">
                <div class="package-search-container config-section">
                    <h4 class="tr-package-search">Package Search</h4>
                    <div id="package-search-autocomplete" class="autocomplete">
                        <input type="text"
                            id="package-search"
                            placeholder="Type package name"
                            autocomplete="off"
                            spellcheck="false"
                            autocapitalize="off">
                    </div>
                </div>
                
                <div id="package-categories">
                    <!-- packages.jsonから動的に生成される -->
                </div>
                
                <details id="postinst-details" class="config-section">
                    <summary>
                        <h4 class="tr-postinst">Postinst (Package installation script)</h4>
                        <div id="postinst-additional-info" class="additional-package-info">
                            <span id="package-size-breakdown"></span>
                            <br>
                            <span id="package-size-note" class="file-size-note tr-package-size-note"></span>
                        </div>
                    </summary> 
                    <textarea
                        id="asu-packages"
                        autocomplete="off"
                        spellcheck="false"
                        autocapitalize="off"
                    ></textarea>
                </details>
            </div>
        </details>
    </div>

    <!-- Scripts Configuration -->
    <div id="custom-scripts-section">
        <details id="scripts-details">
            <summary>
                <h3 class="tr-custom-defaults">Script to run on first boot (uci-defaults)</h3>
            </summary>
            <div id="scripts-config">
                <div class="commands-container config-section">
                    <h4 class="tr-add-commands">Add commands</h4>
                    <div id="commands-autocomplete" class="autocomplete">
                        <input type="text"
                            id="command"
                            placeholder="Type commands"
                            autocomplete="off"
                            spellcheck="false"
                            autocapitalize="off">
                    </div>
                </div>
                
                <!-- setup.jsonから動的に生成される設定セクション -->
                <div id="dynamic-config-sections">
                    <!-- ここにsetup.jsonベースの設定項目が動的に生成される -->
                </div>

                <!-- UCI-defaults セクション -->
                <details id="uci-defaults-details" class="config-section">
                    <summary>
                        <h4 class="tr-uci">UCI-defaults (Boot configuration script)</h4>
                        <div id="uci-defaults-size-info" class="file-size-info">
                            <span id="uci-defaults-size"></span>
                            <br>
                            <span id="uci-size-limit" class="file-size-note tr-uci-size-limit"></span>
                        </div>
                    </summary>
                    <div id="uci-defaults-group">
                        <textarea
                            id="uci-defaults-content"
                            autocomplete="off"
                            spellcheck="false"
                            autocapitalize="off"
                        ></textarea>
                    </div>
                </details>
            </div>
        </details>
    </div>

    <!-- ASU Build Section -->
    <div id="asu-build-section" style="display:none;">
        <br>
        <div id="asu-buildstatus" class="hide">
            <span></span>
            <div id="asu-log" class="hide">
                <details>
                    <summary>
                        <code>STDERR</code>
                    </summary>
                    <pre id="asu-stderr"></pre>
                </details>
                <details>
                    <summary>
                        <code>STDOUT</code>
                    </summary>
                    <pre id="asu-stdout"></pre>
                </details>
            </div>
        </div>
        <a href="javascript:buildAsuRequest()" class="custom-link">
            <span></span><span class="tr-request-build">REQUEST BUILD</span>
        </a>
    </div>
</body>
</html>
