<!DOCTYPE html>
<html>
<head>
    <title>ADB Format Test</title>
</head>
<body>
    <h1>packages.adb Parser Test</h1>
    <input type="file" id="fileInput" accept=".adb">
    <pre id="output"></pre>
    
    <script>
    document.getElementById('fileInput').addEventListener('change', async (e) => {
        const file = e.target.files[0];
        if (!file) return;
        
        const buffer = await file.arrayBuffer();
        const u8 = new Uint8Array(buffer);
        
        // ヘッダー解析
        console.log('First 256 bytes (hex):');
        console.log(Array.from(u8.slice(0, 256)).map(b => b.toString(16).padStart(2, '0')).join(' '));
        
        // ASCII表示
        console.log('First 256 bytes (ASCII):');
        let ascii = '';
        for (let i = 0; i < Math.min(256, u8.length); i++) {
            ascii += (u8[i] >= 32 && u8[i] < 127) ? String.fromCharCode(u8[i]) : '.';
            if ((i + 1) % 16 === 0) ascii += '\n';
        }
        console.log(ascii);
        
        document.getElementById('output').textContent = 
            'Check console for hex dump\n' +
            'File size: ' + u8.length + ' bytes\n' +
            'Header: ' + Array.from(u8.slice(0, 4)).map(b => '0x' + b.toString(16).padStart(2, '0')).join(' ');
    });
    </script>
</body>
</html>
