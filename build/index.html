<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenWrt „Ç´„Çπ„Çø„É†„Éï„Ç°„Éº„É†„Ç¶„Çß„Ç¢„Éì„É´„ÉÄ„Éº</title>
    <style>
        :root {
            --primary-color: #1e90ff;
            --secondary-color: #f0f8ff;
            --border-color: #ddd;
            --text-color: #333;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 30px;
            margin-bottom: 20px;
        }

        .form-section {
            margin-bottom: 30px;
        }

        .form-section h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--secondary-color);
            font-size: 1.3em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--text-color);
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(30, 144, 255, 0.1);
        }

        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .radio-item:hover {
            border-color: var(--primary-color);
            background-color: var(--secondary-color);
        }

        .radio-item input[type="radio"] {
            margin-right: 8px;
        }

        .radio-item input[type="radio"]:checked + span {
            color: var(--primary-color);
            font-weight: 600;
        }

        .conditional-fields {
            margin-top: 15px;
            padding: 15px;
            background-color: var(--secondary-color);
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
        }

        .password-requirements {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .btn {
            background: linear-gradient(135deg, var(--primary-color), #4169e1);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(30, 144, 255, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .output-section {
            margin-top: 30px;
        }

        .script-output {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #4a5568;
        }

        .copy-btn {
            background: var(--success-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            font-size: 14px;
        }

        .copy-btn:hover {
            background: #218838;
        }

        .instructions {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .instructions h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .instructions ol {
            margin-left: 20px;
        }

        .instructions li {
            margin-bottom: 8px;
            color: #856404;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .card {
                padding: 20px;
            }
            
            .radio-group {
                flex-direction: column;
            }
            
            .radio-item {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ OpenWrt „Éï„Ç°„Éº„É†„Ç¶„Çß„Ç¢„Éì„É´„ÉÄ„Éº</h1>
            <p>„Ç´„Çπ„Çø„É†Ë®≠ÂÆö„ÇíÁµÑ„ÅøËæº„Çì„Å†OpenWrt„Éï„Ç°„Éº„É†„Ç¶„Çß„Ç¢„ÇíÁîüÊàê</p>
        </div>

        <div class="card">
            <form id="configForm">
                <!-- Âü∫Êú¨Ë®≠ÂÆö -->
                <div class="form-section">
                    <h3>üåê Âü∫Êú¨Ë®≠ÂÆö</h3>
                    
                    <div class="form-group">
                        <label for="language">Ë®ÄË™ûË®≠ÂÆö</label>
                        <select id="language" class="form-control">
                            <option value="en">English</option>
                            <option value="ja" selected>Êó•Êú¨Ë™û</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="deviceName">„Éá„Éê„Ç§„ÇπÂêç</label>
                        <input type="text" id="deviceName" class="form-control" placeholder="‰æã: OpenWrt-Router">
                    </div>
                </div>

                <!-- „Çª„Ç≠„É•„É™„ÉÜ„Ç£Ë®≠ÂÆö -->
                <div class="form-section">
                    <h3>üîê „Çª„Ç≠„É•„É™„ÉÜ„Ç£Ë®≠ÂÆö</h3>
                    
                    <div class="form-group">
                        <label for="rootPassword">Root„Éë„Çπ„ÉØ„Éº„Éâ</label>
                        <input type="password" id="rootPassword" class="form-control" placeholder="8ÊñáÂ≠ó‰ª•‰∏ä">
                        <div class="password-requirements">
                            ‚Äª 8ÊñáÂ≠ó‰ª•‰∏ä„ÅßË®≠ÂÆö„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇÁ©∫Ê¨Ñ„ÅÆÂ†¥Âêà„ÅØ„Éë„Çπ„ÉØ„Éº„ÉâÊú™Ë®≠ÂÆö„Å®„Å™„Çä„Åæ„Åô„ÄÇ
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword">„Éë„Çπ„ÉØ„Éº„ÉâÁ¢∫Ë™ç</label>
                        <input type="password" id="confirmPassword" class="form-control" placeholder="„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÜçÂÖ•Âäõ">
                    </div>
                </div>

                <!-- Wi-FiË®≠ÂÆö -->
                <div class="form-section">
                    <h3>üì∂ Wi-FiË®≠ÂÆö</h3>
                    
                    <div class="form-group">
                        <label for="wifiSSID">Wi-Fi SSID</label>
                        <input type="text" id="wifiSSID" class="form-control" placeholder="‰æã: MyOpenWrt">
                    </div>

                    <div class="form-group">
                        <label for="wifiPassword">Wi-Fi „Éë„Çπ„ÉØ„Éº„Éâ</label>
                        <input type="password" id="wifiPassword" class="form-control" placeholder="8ÊñáÂ≠ó‰ª•‰∏ä">
                    </div>
                </div>

                <!-- Êé•Á∂öË®≠ÂÆö -->
                <div class="form-section">
                    <h3>üåç „Ç§„É≥„Çø„Éº„Éç„ÉÉ„ÉàÊé•Á∂öË®≠ÂÆö</h3>
                    
                    <div class="form-group">
                        <label>Êé•Á∂ö„Çø„Ç§„Éó</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="connAuto" name="connectionType" value="auto" checked>
                                <span>Ëá™ÂãïÊ§úÂá∫</span>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="connDHCP" name="connectionType" value="dhcp">
                                <span>DHCP</span>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="connPPPoE" name="connectionType" value="pppoe">
                                <span>PPPoE</span>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="connDSLite" name="connectionType" value="dslite">
                                <span>DS-Lite</span>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="connMAPE" name="connectionType" value="mape">
                                <span>MAP-E</span>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="connNone" name="connectionType" value="none">
                                <span>Ë®≠ÂÆö„Å™„Åó</span>
                            </div>
                        </div>
                    </div>

                    <!-- PPPoEË®≠ÂÆö -->
                    <div id="pppoeFields" class="conditional-fields hidden">
                        <div class="form-group">
                            <label for="pppoeUsername">PPPoE „É¶„Éº„Ç∂„ÉºÂêç</label>
                            <input type="text" id="pppoeUsername" class="form-control" placeholder="„Éó„É≠„Éê„Ç§„ÉÄ„Åã„ÇâÊèê‰æõ„Åï„Çå„Åü„É¶„Éº„Ç∂„ÉºÂêç">
                        </div>
                        <div class="form-group">
                            <label for="pppoePassword">PPPoE „Éë„Çπ„ÉØ„Éº„Éâ</label>
                            <input type="password" id="pppoePassword" class="form-control" placeholder="„Éó„É≠„Éê„Ç§„ÉÄ„Åã„ÇâÊèê‰æõ„Åï„Çå„Åü„Éë„Çπ„ÉØ„Éº„Éâ">
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn">üìã „Çπ„ÇØ„É™„Éó„Éà„ÇíÁîüÊàê</button>
            </form>
        </div>

        <!-- ÁîüÊàê„Åï„Çå„Åü„Çπ„ÇØ„É™„Éó„ÉàË°®Á§∫ -->
        <div id="outputSection" class="card output-section hidden">
            <h3>üéØ ÁîüÊàê„Åï„Çå„Åü„Çπ„ÇØ„É™„Éó„Éà</h3>
            <div class="script-output" id="scriptOutput"></div>
            <button type="button" class="copy-btn" onclick="copyScript()">üìã „Çπ„ÇØ„É™„Éó„Éà„Çí„Ç≥„Éî„Éº</button>
            
            <div class="instructions">
                <h4>üìù ‰ΩøÁî®ÊñπÊ≥ï</h4>
                <ol>
                    <li><a href="https://firmware-selector.openwrt.org/" target="_blank">OpenWrt Firmware Selector</a> „Å´„Ç¢„ÇØ„Çª„Çπ</li>
                    <li>„Åä‰Ωø„ÅÑ„ÅÆ„Éá„Éê„Ç§„Çπ„ÇíÊ§úÁ¥¢„Åó„Å¶ÈÅ∏Êäû</li>
                    <li>„ÄåCUSTOMIZE INSTALLED PACKAGES AND/OR FIRST BOOT SCRIPT„Äç„Çí„ÇØ„É™„ÉÉ„ÇØ</li>
                    <li>„ÄåScript to run on first boot (uci-defaults)„Äç„Å´‰∏äË®ò„Çπ„ÇØ„É™„Éó„Éà„Çí„Éö„Éº„Çπ„Éà</li>
                    <li>„ÄåREQUEST BUILD„Äç„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶„Éï„Ç°„Éº„É†„Ç¶„Çß„Ç¢„Çí„Éì„É´„Éâ</li>
                    <li>ÁîüÊàê„Åï„Çå„Åü„Éï„Ç°„Éº„É†„Ç¶„Çß„Ç¢„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Åó„Å¶„Ç§„É≥„Çπ„Éà„Éº„É´</li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        const form = document.getElementById('configForm');
        const outputSection = document.getElementById('outputSection');
        const scriptOutput = document.getElementById('scriptOutput');
        const pppoeFields = document.getElementById('pppoeFields');

        // Êé•Á∂ö„Çø„Ç§„Éó„ÅÆÂ§âÊõ¥ÊôÇ„Å´PPPoE„Éï„Ç£„Éº„É´„Éâ„ÅÆË°®Á§∫/ÈùûË°®Á§∫„ÇíÂàá„ÇäÊõø„Åà
        document.querySelectorAll('input[name="connectionType"]').forEach(radio => {
            radio.addEventListener('change', function() {
                if (this.value === 'pppoe') {
                    pppoeFields.classList.remove('hidden');
                } else {
                    pppoeFields.classList.add('hidden');
                }
            });
        });

        // „Éï„Ç©„Éº„É†ÈÄÅ‰ø°Âá¶ÁêÜ
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // „Éï„Ç©„Éº„É†„Éá„Éº„Çø„ÇíÂèñÂæó
            const formData = new FormData(form);
            const config = {
                language: document.getElementById('language').value,
                deviceName: document.getElementById('deviceName').value,
                rootPassword: document.getElementById('rootPassword').value,
                confirmPassword: document.getElementById('confirmPassword').value,
                wifiSSID: document.getElementById('wifiSSID').value,
                wifiPassword: document.getElementById('wifiPassword').value,
                connectionType: formData.get('connectionType'),
                pppoeUsername: document.getElementById('pppoeUsername').value,
                pppoePassword: document.getElementById('pppoePassword').value
            };

            // „Éê„É™„Éá„Éº„Ç∑„Éß„É≥
            if (!validateForm(config)) {
                return;
            }

            // „Çπ„ÇØ„É™„Éó„ÉàÁîüÊàê
            const script = generateScript(config);
            scriptOutput.textContent = script;
            outputSection.classList.remove('hidden');
            outputSection.scrollIntoView({ behavior: 'smooth' });
        });

        function validateForm(config) {
            // „Éë„Çπ„ÉØ„Éº„ÉâÁ¢∫Ë™ç
            if (config.rootPassword && config.rootPassword !== config.confirmPassword) {
                alert('„Éë„Çπ„ÉØ„Éº„Éâ„Åå‰∏ÄËá¥„Åó„Åæ„Åõ„Çì„ÄÇ');
                return false;
            }

            // „Éë„Çπ„ÉØ„Éº„ÉâÈï∑Á¢∫Ë™ç
            if (config.rootPassword && config.rootPassword.length < 8) {
                alert('Root„Éë„Çπ„ÉØ„Éº„Éâ„ÅØ8ÊñáÂ≠ó‰ª•‰∏ä„ÅßË®≠ÂÆö„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return false;
            }

            // Wi-Fi„Éë„Çπ„ÉØ„Éº„ÉâÈï∑Á¢∫Ë™ç
            if (config.wifiPassword && config.wifiPassword.length < 8) {
                alert('Wi-Fi„Éë„Çπ„ÉØ„Éº„Éâ„ÅØ8ÊñáÂ≠ó‰ª•‰∏ä„ÅßË®≠ÂÆö„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return false;
            }

            // PPPoEË®≠ÂÆöÁ¢∫Ë™ç
            if (config.connectionType === 'pppoe') {
                if (!config.pppoeUsername || !config.pppoePassword) {
                    alert('PPPoE„ÅÆ„É¶„Éº„Ç∂„ÉºÂêç„Å®„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                    return false;
                }
            }

            return true;
        }

        function generateScript(config) {
            let script = '#!/bin/sh\n\n';
            script += '# OpenWrt Auto Configuration Script\n';
            script += '# Generated by OpenWrt Firmware Builder\n\n';
            
            script += 'CONFIG_SCRIPT="/tmp/aios/aios-light.sh"\n';
            script += 'mkdir -p /tmp/aios\n\n';

            script += 'wget --no-check-certificate -O "$CONFIG_SCRIPT" "https://site-u.pages.dev/build/scripts/aios-light.sh" 2>/dev/null\n\n';

            script += 'if [ ! -f "$CONFIG_SCRIPT" ]; then\n';
            script += '    logger -t firmware-builder "Failed to download aios-light.sh"\n';
            script += '    exit 1\n';
            script += 'fi\n\n';

            script += 'chmod +x "$CONFIG_SCRIPT"\n\n';

            // Áí∞Â¢ÉÂ§âÊï∞„ÅÆË®≠ÂÆö
            script += '# Configuration Variables\n';
            
            if (config.language) {
                script += `export LANGUAGE="${config.language}"\n`;
            }
            
            if (config.deviceName) {
                script += `export DEVICE_NAME="${config.deviceName}"\n`;
            }
            
            if (config.rootPassword) {
                script += `export ROOT_PASSWORD="${config.rootPassword}"\n`;
            }
            
            if (config.wifiSSID) {
                script += `export WLAN_NAME="${config.wifiSSID}"\n`;
            }
            
            if (config.wifiPassword) {
                script += `export WLAN_PASSWORD="${config.wifiPassword}"\n`;
            }

            // Êé•Á∂ö„Çø„Ç§„Éó„ÅÆË®≠ÂÆö
            if (config.connectionType === 'auto') {
                script += 'export ISP_MODE=""\n';
            } else if (config.connectionType === 'pppoe') {
                script += 'export ISP_MODE="pppoe"\n';
                if (config.pppoeUsername) {
                    script += `export PPPOE_USERNAME="${config.pppoeUsername}"\n`;
                }
                if (config.pppoePassword) {
                    script += `export PPPOE_PASSWORD="${config.pppoePassword}"\n`;
                }
            } else {
                script += `export ISP_MODE="${config.connectionType}"\n`;
            }

            script += '\n# Execute configuration script\n';
            script += 'exec sh "$CONFIG_SCRIPT" "$ISP_MODE"\n';

            return script;
        }

        function copyScript() {
            const script = scriptOutput.textContent;
            navigator.clipboard.writeText(script).then(function() {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '‚úÖ „Ç≥„Éî„ÉºÂÆå‰∫ÜÔºÅ';
                btn.style.background = '#28a745';
                
                setTimeout(function() {
                    btn.textContent = originalText;
                    btn.style.background = '#28a745';
                }, 2000);
            }).catch(function(err) {
                alert('„Ç≥„Éî„Éº„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇÊâãÂãï„Åß„Ç≥„Éî„Éº„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
            });
        }
    </script>
</body>
</html>
